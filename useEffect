useEffect(() => {
  if (!promptRoot) return;

  // VERY specific selector â€“ ONLY Inline AI 3-dot button
  const commandButtonSelector =
    '.k-inlineai button[aria-label="Commands"], .k-inlineai button[title="Commands"], .k-inlineai .k-more-actions';

  const handler = (ev: PointerEvent | MouseEvent) => {
    const target = ev.target as HTMLElement | null;
    if (!target) return;

    const btn = target.closest(commandButtonSelector) as HTMLElement | null;
    if (!btn) return;

    // Safety: only inside prompt
    if (!promptRoot.contains(btn)) return;

    const sx = window.scrollX || window.pageXOffset || 0;
    const sy = window.scrollY || window.pageYOffset || 0;

    // IMPORTANT: prevent default only for this button
    ev.preventDefault();
    ev.stopPropagation();

    // Let Kendo receive click
    setTimeout(() => {
      btn.click();
    }, 0);

    // Restore scroll
    requestAnimationFrame(() => window.scrollTo(sx, sy));
    setTimeout(() => window.scrollTo(sx, sy), 50);
  };

  document.addEventListener('pointerdown', handler, true);

  return () => {
    document.removeEventListener('pointerdown', handler, true);
  };
}, [promptRoot]);
