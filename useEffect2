const handler = (ev: PointerEvent | MouseEvent) => {
  try {
    const target = ev.target as HTMLElement | null;
    if (!target) return;

    const btn = target.closest(buttonSelector) as HTMLElement | null;
    if (!btn) return;

    // ðŸš« Allow menu items to work normally
    if (
      target.closest('.k-menu-item') ||
      target.closest('.k-item') ||
      target.closest('.k-menu-link') ||
      target.closest('.k-popup')
    ) {
      return;
    }

    // Save scroll
    const sx = window.scrollX || 0;
    const sy = window.scrollY || 0;

    ev.preventDefault(); // âœ” stop scroll
    // âŒ NO stopPropagation

    // Replay click
    setTimeout(() => {
      btn.dispatchEvent(
        new MouseEvent('click', { bubbles: true, cancelable: true })
      );
    }, 0);

    // Restore scroll
    setTimeout(() => window.scrollTo(sx, sy), 0);
    setTimeout(() => window.scrollTo(sx, sy), 30);
  } catch {}
};
